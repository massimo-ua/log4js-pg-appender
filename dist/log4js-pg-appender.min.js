/**
 * @license
 * @simoware/log4js-pg-appender v0.0.2
 * Copyright (c) 2024 grishkov.m@gmail.com
 * Licensed under the MIT license
 */
var o=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports);var c=o((v,a)=>{var{Client:E}=require("pg"),t;a.exports={connect(e){return t||(t=new E(e),t.connect(),t)},disconnect(){t&&(t.end(),t=null)}}});var d=o((T,u)=>{u.exports=(e,r="Logs")=>{let n={name:"log4js-pg-appender-add-record",text:`INSERT INTO "${r}" ("startTime", "categoryName", "data", "level", "context") VALUES($1, $2, $3, $4, $5)`};return(...s)=>e.query({...n,values:s})}});var w=o((O,l)=>{var b=c(),y=d();function $(e){if(!e)throw new Error("config is required");if(!e.host)throw new Error("host is required");if(!e.database)throw new Error("database is required");if(!e.user)throw new Error("user is required");if(!e.password)throw new Error("password is required");if(!e.tableName)throw new Error("tableName is required")}function S(e){$(e);let r=b.connect(e),n=y(r,e.tableName);return s=>{let{startTime:h,categoryName:N,data:f,level:m,context:i}=s;n(h,N,JSON.stringify(f),m.levelStr,i?JSON.stringify(i):null).catch(x=>{console.error(x.stack)})}}l.exports.configure=e=>S(e)});var p=o((A,q)=>{q.exports=w()});module.exports=p();
//# sourceMappingURL=log4js-pg-appender.min.js.map
